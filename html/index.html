<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="/static/css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/6.4.0/adapter.min.js"
    integrity="sha256-UH0Npcih7yj1s23pQK0UCrCSxx7AkT91CCMsUGnZ9Ew=" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">
  <title>WebRTC Remote Viewer</title>
</head>
<body>
  <div id="app">
    <div id="controls">
      <div id="error"></div>
    </div>
    <span>
    
      <div id="instructions">Select a screen and press Start</div>
      <div id="event-box" tabindex='0'>
          <video id="remote-video" autoplay muted playsinline></video>
      </div>
    </span>
    <span style="position:absolute;right:10px;top:10px">
      <div><select id="screen-select"></select></div>
      <div><button id="start-stop">Start</button></div>
      <div><button id="home">Home</button></div>
      <div><button id="memu">Memu</button></div>
      <div><button id="back">Back</button></div>
      <div><button id="shake">Shake</button></div>
      <div><button id="volumeup">Vol+</button></div>
      <div><button id="volumeup">Vol-</button></div>
    </span>
  </div>
  <script src="/static/js/app.js"></script>
  <script type="text/javascript">
    const screenSelect = document.querySelector('#screen-select');
    const homeButton = document.querySelector('#home');
    const backButton = document.querySelector('#back');
    const memuButton = document.querySelector('#memu');
    const shakeButton = document.querySelector('#shake');
    const volumeDownButton = document.querySelector('#volumedown');
    const volumeUpButton = document.querySelector('#volumeup');

    function http_get(url) {
      var xhr = new XMLHttpRequest();
      
      xhr.open('GET', url, true);
      xhr.send();
    }
    homeButton.addEventListener('click', () => {
        name = screenSelect.options[screenSelect.selectedIndex].value;
        url = 'http://' + location.host + '/vm/sendkey?key=home&name=' + name + ''
        http_get(url);
    });
    backButton.addEventListener('click', () => {
        name = screenSelect.options[screenSelect.selectedIndex].value;
        url = 'http://' + location.host + '/vm/sendkey?key=back&name=' + name + ''
        http_get(url);
    });
    memuButton.addEventListener('click', () => {
        name = screenSelect.options[screenSelect.selectedIndex].value;
        url = 'http://' + location.host + '/vm/sendkey?key=memu&name=' + name + ''
        http_get(url);
    });
    volumeDownButton.addEventListener('click', () => {
        name = screenSelect.options[screenSelect.selectedIndex].value;
        url = 'http://' + location.host + '/vm/sendkey?key=volumedown&name=' + name + ''
        http_get(url);
    });
    volumeUpButton.addEventListener('click', () => {
        name = screenSelect.options[screenSelect.selectedIndex].value;
        url = 'http://' + location.host + '/vm/sendkey?key=volumeup&name=' + name + ''
        http_get(url);
    });
    shakeButton.addEventListener('click', () => {
        name = screenSelect.options[screenSelect.selectedIndex].value;
        url = 'http://' + location.host + '/vm/shake?name=' + name + ''
        http_get(url);
    });
  </script>
</body>
</html>